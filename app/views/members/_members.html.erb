<div class="pagination pagination-centered"><%= will_paginate @members, renderer: BootstrapPagination::Rails %></div>

<%= form_tag :search_members, method: 'get', remote: true, class: "form-inline", role: "form" do %>
  <div class="form-group">
    <span>メンバー検索</span>
    <%= text_field_tag :search, params[:search], class: "form-control", placeholder: "keyword" %>
  </div>
  <%= submit_tag 'Search', :name => nil, class: 'btn btn-primary' %>
<% end %>

<%= content_tag :table, class: 'table table-condensed table-bordered table-striped' do %>
  <tr>
    <th><%= sortable('last_name_alphabet',"頭") %></th>
    <th class="col-md-2">氏名</th>
    <th class="col-md-2">Fb</th>
    <th class="col-md-1">属性</th>
    <th class="col-md-2"><%= sortable('affiliation',"所属") %></th>
    <th class="col-md-1">役職</th>
    <th class="col-md-1">前所属</th>
    <th class="col-md-1">備考</th>
    <th class="col-md-1"><%= link_to "出席回数", count: true %></th>
    <th></th>
  </tr>
  <% @members.each do |member| %>
    <%= content_tag :tr do %>
      <td><%= member.last_name_alphabet[0] if member.last_name_alphabet.present? %></td>
      <td><%= link_to "#{member.last_name} #{member.first_name}", member_path(member) %></td>
      <td><%= link_to member.fb_name, "https://facebook.com/#{member.fb_user_id}", target: :blank if member.fb_user_id.present?%></td>
      <td><%= Category.find(member.category_id).try(:name) if member.category_id.present? %></td>
      <td><%= member.affiliation %></td>
      <td><%= member.title %></td>
      <td><%= member.previous_affiliation %></td>
      <td><%= member.note %></td>
      <td><%= member.participated_events.count %></td>
      <td><%= link_to "詳細", member_path(member), class:"btn btn-primary btn-xs" %></td>
    <% end %>
  <% end %>
<% end %>

<div class="pagination pagination-centered"><%= will_paginate @members, renderer: BootstrapPagination::Rails %></div>

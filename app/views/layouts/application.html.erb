<!DOCTYPE html>
<html>
  <head>
    <title>GTIC User</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- ========== Stylesheet ============= -->
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>

    <!-- ========== Javascript ============= -->
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    <script src="/assets/application.js?body=1" type="text/javascript"></script>
    <%= javascript_include_tag "//www.google.com/jsapi" %> <!-- To use geo chart in chartkick -->

  <!--
    <%#= javascript_include_tag "highcharts/highcharts.js", "data-turbolinks-track" => true %>
    <%#= javascript_include_tag "//www.google.com/jsapi", "chartkick" %>
    <meta name="robots" content="noindex,follow" >
    <meta name="robots" content="noindex,nofollow,noarchive" >
    <meta name="googlebot" content="noindex,nofollow,noarchive">

    <script>
      $(document).on('ajax:before ajaxStart page:fetch', function(){
        var top = $(window).height()/2 + $(window).scrollTop();
        $('body').spin({top: top});
      });
      $(document).on('ajax:complete ajaxComplete page:change', function(){
        $('body').spin(false);
      });
    </script>
    -->
  </head>

  <body>
    <%= render 'layouts/header' %>

    <div class="container">
      <% flash.each do |key,value| %>
        <%= content_tag(:div, value, class: "alert alert-#{key}") %>
      <% end %>
    </div>

    <div class="container-fluid">
      <%= yield %>
    </div>

    <div class="container-fluid">
      <%= render 'layouts/footer' %>
      <%= debug(params) if Rails.env.development? %>
    </div>



    <!-- Facebook Analytics -->
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : <%= ENV['FACEBOOK_APP_ID'] %>,
          cookie     : true,
          xfbml      : true,
          version    : 'v10.0'
        });

        FB.AppEvents.logPageView();
      };

      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "https://connect.facebook.net/en_US/sdk.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));
    </script>

  </body>

</html>
